kind: ErrorExistsCondition
name: Check for Error Conditions
style: condition
status: alpha
version: v0.1.0
summary: Enhanced check for errors in traces
description: |-
    This is an improved version that checks if any span in a trace has an error and
    provides better diagnostics.
ports:
    - direction: input
      name: Match
      type: SampleData
    - direction: output
      name: And
      type: SampleData
properties:
    - default:
        - error
      description: |
        The field names to check for errors.
      name: ErrorFields
      summary: |
        The name of the field(s) to check for errors. If any of these fields exist in any span of a trace,
        the test will pass.
      type: stringarray
      validations:
        - nonempty
        - noblanks
tags:
    - service:refinery
    - vendor:Honeycomb
    - type:error
    - category:condition
templates:
    - data:
        - key: Fields
          value: '{{ .Values.ErrorFields | encodeAsArray}}'
        - key: Operator
          value: exists
      format: rules
      kind: refinery_rules
      meta:
        condition: true
      name: ErrorExistsCondition
type: base
