name: custommetricfilterprocessor_metric_and_datapoint_test
version: v0.1.0
summary: Test for CustomMetricFilterProcessor with both metric and datapoint statements
description: |
  Test configuration with an OTel receiver, CustomMetricFilterProcessor with both metric and datapoint
  filter statements, and OTel HTTP exporter.

components:
  - name: OTel Receiver 1
    kind: OTelReceiver
  - name: metric_filter_1
    kind: CustomMetricFilterProcessor
    properties:
      - name: MetricStatements
        value:
          - 'name == "system.cpu.usage"'
      - name: DataPointStatements
        value:
          - 'attributes["host.name"] == "prod-server-01"'
          - 'attributes["environment"] == "production"'
  - name: OTel HTTP Exporter 1
    kind: OTelHTTPExporter

connections:
  - source:
      component: OTel Receiver 1
      port: Metrics
      type: OTelMetrics
    destination:
      component: metric_filter_1
      port: Metrics
      type: OTelMetrics
  - source:
      component: metric_filter_1
      port: Metrics
      type: OTelMetrics
    destination:
      component: OTel HTTP Exporter 1
      port: Metrics
      type: OTelMetrics
